# 감정 일기 앱 - 관리자 기능 명세서 (관리자 플로우 기준)

## 목차

### 1. 관리자 인증 플로우
- 1.1 관리자 로그인

### 2. 서비스 통계 플로우
- 2.1 서비스 통계 화면 진입
- 2.2 전체 통계 카드 조회
- 2.3 일지 작성 추이 차트 조회
- 2.4 사용자 활동 통계 차트 조회
- 2.5 위험 레벨 분포 통계 조회

### 3. 공지사항 관리 플로우
- 3.1 공지사항 목록 조회
- 3.2 공지사항 작성
- 3.3 공지사항 조회
- 3.4 공지사항 수정
- 3.5 공지사항 삭제
- 3.6 공지사항 고정

### 4. 시스템 설정 플로우
- 4.1 시스템 설정 화면 진입
- 4.2 위험 신호 감지 기준 변경
- 4.3 상담 기관 리소스 관리

### 5. 에러 로그 조회 플로우
- 5.1 에러 로그 목록 조회
- 5.2 에러 로그 필터링 및 검색
- 5.3 에러 로그 상세 조회

### 6. 로그아웃 플로우
- 6.1 관리자 로그아웃

### 7. 공통 기능 및 상호작용
- 7.1 네비게이션
- 7.2 데이터 동기화 및 자동 업데이트
- 7.3 에러 처리 및 로딩 상태

---

## 1. 관리자 인증 플로우

### 1.1 관리자 로그인
**화면 전환**:
- 관리자 로그인 페이지로 이동

**로그인 기능**:
1. 관리자 ID (이메일) 입력
   - 이메일 입력 필드 제공
   - 실시간 검증 없음

2. 비밀번호 입력
   - 비밀번호 입력 필드 제공
   - 비밀번호 표시/숨김 기능 제공
   - 실시간 검증 없음

3. 로그인 실행
   - 로그인 실행 기능 제공
   - 클라이언트 검증 없이 즉시 관리자 로그인 API 호출
   - 로딩 상태 표시

**로그인 성공 시**:
- 관리자 JWT 토큰 생성 및 localStorage에 저장 (admin_jwt_token)
- 관리자 정보 저장
- 서비스 통계 화면으로 이동

**로그인 실패 시**:
- 서버에서 검증 (이메일 형식, 빈 필드, 비밀번호 불일치, 관리자 권한 없음 등)
- 통합 에러 메시지 표시
- 필드별 에러 메시지 없음

**보안 처리**:
- 관리자 권한 검증 (일반 사용자 계정으로는 접근 불가)
- 관리자 로그인 시도 이력 기록 (에러 로그에 기록)

---

## 2. 서비스 통계 플로우

### 2.1 서비스 통계 화면 진입
**화면 전환**:
- 관리자 로그인 성공 후 자동 이동 또는 네비게이션에서 서비스 통계 기능 실행
- 서비스 통계 메인 화면으로 이동

**초기 로드**:
- 시스템: 전체 통계 데이터 자동 로드
- 로딩 상태 표시
- 데이터 로드 완료 후 통계 화면 표시

**표시 내용**:
- 전체 통계 카드 (2.2)
- 일지 작성 추이 차트 (2.3)
- 사용자 활동 통계 차트 (2.4)
- 위험 레벨 분포 통계 (2.5)

---

### 2.2 전체 통계 카드 조회
**통계 카드 6개**:

1. **전체 사용자 수**
   - 현재 등록된 총 사용자 수 표시
   - 이전 기간 대비 증감 표시
   - 기간 필터 기능 제공: 주간/월간/연간 선택 가능

2. **활성 사용자 수**
   - 일일 활성 사용자 수 (DAU)
   - 주간 활성 사용자 수 (WAU)
   - 월간 활성 사용자 수 (MAU)
   - 기간 필터 기능 제공: DAU/WAU/MAU 선택 가능

3. **신규 가입자 수**
   - 오늘 신규 가입자 수
   - 이번 주 신규 가입자 수
   - 이번 달 신규 가입자 수
   - 기간 필터 기능 제공: 일/주/월 선택 가능

4. **총 일지 작성 수**
   - 전체 누적 일지 작성 개수
   - 이전 기간 대비 증감 표시

5. **일평균 일지 작성 수**
   - 선택한 기간의 일평균 일지 작성 개수
   - 기간 필터 기능 제공: 주간/월간/연간 선택 가능

6. **위험 레벨별 사용자 수**
   - High 레벨 사용자 수 (시각적으로 구분)
   - Medium 레벨 사용자 수 (시각적으로 구분)
   - Low 레벨 사용자 수 (시각적으로 구분)
   - None 레벨 사용자 수 (시각적으로 구분)
   - 개인 식별 정보 없이 통계만 표시

**데이터 갱신**:
- 페이지 진입 시 자동 로드
- 기간 필터 변경 시 자동 갱신

---

### 2.3 일지 작성 추이 차트 조회
**차트 표시**:
- 일지 작성 개수 추이 막대 그래프
- X축: 날짜 (일별/주별/월별)
- Y축: 작성된 일지 개수
- 선택한 기간 필터에 따라 표시 단위 변경

**기간 필터**:
- 주간/월간/연간 선택 기능 제공
- 주간: 최근 7일 또는 선택한 주의 일별 추이
- 월간: 선택한 월의 일별 추이
- 연간: 월별 추이

**차트 상호작용**:
- 데이터 포인트 호버 시 해당 기간의 일지 개수 표시 기능 제공

---

### 2.4 사용자 활동 통계 차트 조회
**차트 표시**:
- 사용자 활동 추이 라인 차트
- 여러 지표를 동시에 표시 가능:
  - 활성 사용자 수 추이 (DAU/WAU/MAU)
  - 신규 가입자 수 추이
  - 사용자 유지율 추이 (재방문율)
- X축: 날짜 (일별/주별/월별)
- Y축: 사용자 수 또는 비율
- 선택한 기간 필터에 따라 표시 단위 변경

**기간 필터**:
- 주간/월간/연간 선택 기능 제공
- 주간: 최근 7일 또는 선택한 주의 일별 추이
- 월간: 선택한 월의 일별 추이
- 연간: 월별 추이

**지표 선택**:
- 표시할 지표 선택 기능 제공:
  - 활성 사용자 수 (DAU/WAU/MAU)
  - 신규 가입자 수
  - 사용자 유지율
- 여러 지표 동시 선택 가능

**차트 상호작용**:
- 데이터 포인트 호버 시 해당 기간의 상세 정보 표시 기능 제공

---

### 2.5 위험 레벨 분포 통계 조회
**차트 표시**:
- 위험 레벨별 사용자 수 분포 차트
- 파이 차트 또는 막대 그래프 형태로 표시
- 4가지 위험 레벨별 비율 표시:
  - High 레벨 사용자 수 및 비율
  - Medium 레벨 사용자 수 및 비율
  - Low 레벨 사용자 수 및 비율
  - None 레벨 사용자 수 및 비율
- 각 레벨별로 시각적으로 구분하여 표시
- 범례 표시 (위험 레벨, 사용자 수, 비율)
- 개인 식별 정보 없이 통계만 표시

**기간 필터**:
- 주간/월간/연간 선택 기능 제공
- 선택한 기간에 따라 차트 데이터 자동 갱신

**차트 상호작용**:
- 차트 호버 시 해당 위험 레벨의 상세 정보 표시 기능 제공

---

## 3. 공지사항 관리 플로우

### 3.1 공지사항 목록 조회
**화면 전환**:
- 네비게이션에서 공지사항 관리 기능 실행
- 공지사항 관리 페이지로 이동

**초기 로드**:
- 시스템: 전체 공지사항 목록 자동 로드
- 로딩 상태 표시

**테이블 표시 내용**:
- 각 행: 공지사항 정보
- 열 구성:
  - **고정 여부**: 고정 표시 (고정된 경우 표시)
  - **제목**: 공지사항 제목
  - **작성자**: 작성한 관리자 이름
  - **작성일**: 작성 날짜 (YYYY-MM-DD)
  - **조회수**: 사용자가 조회한 횟수
  - **공개 상태**: 공개/비공개 배지
  - **액션**: 
    - 고정/고정 해제 기능 제공
    - 조회 기능 제공
    - 수정 기능 제공
    - 삭제 기능 제공

**정렬**:
- 기본 정렬: 고정된 공지사항 먼저, 그 다음 작성일 최신순

**공지사항 작성 기능**:
- 새 공지사항 작성 기능 실행 → 공지사항 작성 표시 (3.2)

---

### 3.2 공지사항 작성
**화면 전환**:
- 공지사항 목록에서 새 공지사항 작성 기능 실행
- 공지사항 작성 표시

**작성 기능**:

1. **제목 입력** (필수):
   - 제목 입력 필드 제공
   - 최대 200자

2. **내용 입력** (필수):
   - HTML 에디터 제공
   - 기본 포맷팅 도구 제공:
     - 굵게, 기울임, 밑줄
     - 제목 (H1, H2, H3)
     - 목록 (순서 있는 목록, 순서 없는 목록)
     - 링크 삽입
     - 이미지 삽입
   - 미리보기 기능 제공:
     - 편집 / 미리보기 전환 가능
     - 미리보기에서 HTML 렌더링된 결과 확인

3. **옵션 설정**:
   - **공개 상태** (필수):
     - 공개: 사용자에게 표시됨
     - 비공개: 관리자만 볼 수 있음
   - **상단 고정**:
     - 선택 시 → 공지사항 목록에 고정 표시
     - 사용자 화면에서도 고정 공지사항이 우선 표시됨

4. **작성 및 저장**:
   - 작성 완료 기능 실행
   - 검증 통과 → 공지사항 저장 API 호출
   - 저장 성공 시:
     - 성공 메시지 표시
     - 공지사항 목록 자동 갱신
     - 작성 표시 닫기

**닫기**:
- 닫기 기능 제공 → 작성 표시 닫기
- 작성 중 내용이 있는 경우 → 확인 기능 표시

---

### 3.3 공지사항 조회
**화면 전환**:
- 공지사항 목록에서 조회 기능 실행
- 공지사항 조회 표시

**표시 내용**:
- 공지사항 제목
- 작성자
- 작성일
- 고정 여부 (고정된 경우 표시)
- 공개 상태
- 조회수
- 공지사항 내용 (HTML 렌더링)
  - 편집기에서 작성한 HTML 그대로 렌더링
  - 이미지, 링크 등 모든 요소 정상 표시

**닫기**:
- 닫기 기능 제공 → 조회 표시 닫기

**참고**: 이 기능은 관리자가 작성한 공지사항을 확인하는 용도입니다. 사용자가 조회하는 공지사항은 사용자 명세서 10.4에 정의되어 있습니다.

---

### 3.4 공지사항 수정
**화면 전환**:
- 공지사항 목록에서 수정 기능 실행
- 공지사항 수정 표시

**수정 기능**:
- 3.2 공지사항 작성과 동일한 구조
- 기존 공지사항 내용이 입력 필드에 자동 로드됨:
  - 제목
  - HTML 내용
  - 공개 상태
  - 상단 고정 여부

**수정 및 저장**:
- 내용 수정 후 수정 완료 기능 실행
- 검증 통과 → 공지사항 수정 API 호출
- 저장 성공 시:
  - 성공 메시지 표시
  - 공지사항 목록 자동 갱신
  - 수정 표시 닫기

**닫기**:
- 닫기 기능 제공 → 수정 표시 닫기
- 수정한 내용이 있는 경우 → 확인 기능 표시

---

### 3.5 공지사항 삭제
**화면 전환**:
- 공지사항 목록에서 삭제 기능 실행

**삭제 확인**:
- 삭제 확인 기능 표시:
  - 삭제 확인 메시지 표시
  - 삭제 확인 실행:
     - 공지사항 삭제 API 호출
     - 삭제 성공 시:
       - 성공 메시지 표시
       - 공지사항 목록에서 제거
       - 목록 자동 갱신
  - 취소 선택 → 확인 기능 닫기

---

### 3.6 공지사항 고정
**화면 전환**:
- 공지사항 목록에서 고정/고정 해제 기능 실행

**고정/고정 해제**:
- 고정되지 않은 공지사항: 고정 기능 실행 → 고정 표시
- 고정된 공지사항: 고정 해제 기능 실행 → 고정 해제
- 고정 상태 즉시 반영 (API 호출)
- 고정된 공지사항은 목록에 우선 표시
- 사용자 화면(사용자 명세서 10.4)에서도 고정 공지사항이 우선 표시됨

---

## 4. 시스템 설정 플로우

### 4.1 시스템 설정 화면 진입
**화면 전환**:
- 네비게이션에서 시스템 설정 기능 실행
- 시스템 설정 페이지로 이동

**탭 구성**:
- 위험 신호 기준 변경 (기본 선택)
- 상담 기관 리소스 관리

**데이터 로드**:
- 페이지 진입 시 자동 로드
- 로딩 상태 표시

---

### 4.2 위험 신호 감지 기준 변경
**화면**: 시스템 설정 페이지 - 위험 신호 기준 변경 탭 선택

**설정 항목**:

0. **부정 감정 기준** (정보 표시, 수정 불가)
   - **KoBERT 감정 분석 기준**: 위험 신호 판정은 KoBERT가 분석한 감정(`emotion` 컬럼)을 기준으로 함
   - **KoBERT 감정 종류**: 행복, 중립, 당황, 슬픔, 분노, 불안, 혐오 (7가지)
     - 긍정: 행복 (1가지)
     - 중립: 중립, 당황 (2가지)
     - 부정: 슬픔, 분노, 불안, 혐오 (4가지)
   - **부정 감정 심각도별 분류**:
     - **고위험 부정 감정 (2점)**: 슬픔, 분노
     - **중위험 부정 감정 (1점)**: 불안, 혐오
   - **계산 방식**: 각 감정의 가중치를 합산하여 점수로 계산
     - 예시: 슬픔 2일 = 4점, 불안 3일 = 3점, 총 7점
   - **참고**: 중립(`중립`, `당황`)과 긍정(`행복`) 감정은 위험 신호 계산에 포함되지 않음

1. **모니터링 기간 (일)**
   - 설명: 위험도 평가 시 분석할 과거 일지의 기간입니다
   - 입력: 숫자 입력 필드 (1-365)
   - 기본값: 14일
   - 현재 설정 표시: "현재 설정: 최근 14일간의 일지 분석"
   - **참고**: 사용자 명세서 9.1의 "최근 14일 일기 데이터 조회"는 이 설정값을 반영합니다

2. **High 레벨 판정 기준**:
   - **연속 부정 감정 임계 점수**:
     - 설명: 최근부터 거슬러 올라가며 연속으로 부정적 감정을 기록한 점수가 이 값 이상이면 High 레벨로 판정됩니다 (연속이 끊기면 계산 종료, 고위험 감정 1일=2점, 중위험 감정 1일=1점)
     - 입력: 숫자 입력 필드 (1-100)
     - 기본값: 8점
     - 현재 설정 표시: "현재 설정: 연속 부정 감정 점수 8점 이상 시 High 레벨"
   - **또는 모니터링 기간 내 부정 감정 임계 점수**:
     - 설명: 모니터링 기간 내에서 부정 감정을 기록한 모든 날짜의 점수 합계가 이 값 이상이면 High 레벨로 판정됩니다 (연속 여부와 무관하게 기간 내 모든 부정 감정 합산)
     - 입력: 숫자 입력 필드 (1-200)
     - 기본값: 12점 (모니터링 기간 14일 기준)
     - 현재 설정 표시: "현재 설정: 14일 중 부정 감정 점수 12점 이상 시 High 레벨"
   - **둘 중 하나라도 충족하면 High 레벨로 판정**

3. **Medium 레벨 판정 기준**:
   - **연속 부정 감정 임계 점수**:
     - 설명: 최근부터 거슬러 올라가며 연속으로 부정적 감정을 기록한 점수가 이 값 이상이면 Medium 레벨로 판정됩니다 (연속이 끊기면 계산 종료, 고위험 감정 1일=2점, 중위험 감정 1일=1점)
     - 입력: 숫자 입력 필드 (1-100)
     - 기본값: 5점
     - 현재 설정 표시: "현재 설정: 연속 부정 감정 점수 5점 이상 시 Medium 레벨"
   - **또는 모니터링 기간 내 부정 감정 임계 점수**:
     - 설명: 모니터링 기간 내에서 부정 감정을 기록한 모든 날짜의 점수 합계가 이 값 이상이면 Medium 레벨로 판정됩니다 (연속 여부와 무관하게 기간 내 모든 부정 감정 합산)
     - 입력: 숫자 입력 필드 (1-200)
     - 기본값: 8점 (모니터링 기간 14일 기준)
     - 현재 설정 표시: "현재 설정: 14일 중 부정 감정 점수 8점 이상 시 Medium 레벨"
   - **둘 중 하나라도 충족하면 Medium 레벨로 판정**
   - **단, High 레벨 기준을 충족하지 않은 경우에만 Medium으로 판정**

4. **Low 레벨 판정 기준**:
   - **연속 부정 감정 임계 점수**:
     - 설명: 최근부터 거슬러 올라가며 연속으로 부정적 감정을 기록한 점수가 이 값 이상이면 Low 레벨로 판정됩니다 (연속이 끊기면 계산 종료, 고위험 감정 1일=2점, 중위험 감정 1일=1점)
     - 입력: 숫자 입력 필드 (1-100)
     - 기본값: 2점
     - 현재 설정 표시: "현재 설정: 연속 부정 감정 점수 2점 이상 시 Low 레벨"
   - **또는 모니터링 기간 내 부정 감정 임계 점수**:
     - 설명: 모니터링 기간 내에서 부정 감정을 기록한 모든 날짜의 점수 합계가 이 값 이상이면 Low 레벨로 판정됩니다 (연속 여부와 무관하게 기간 내 모든 부정 감정 합산)
     - 입력: 숫자 입력 필드 (1-200)
     - 기본값: 4점 (모니터링 기간 14일 기준)
     - 현재 설정 표시: "현재 설정: 14일 중 부정 감정 점수 4점 이상 시 Low 레벨"
   - **둘 중 하나라도 충족하면 Low 레벨로 판정**
   - **단, High 또는 Medium 레벨 기준을 충족하지 않은 경우에만 Low로 판정**

5. **None 레벨**:
   - 위의 High/Medium/Low 기준을 모두 충족하지 않는 경우
   - 별도 설정 불필요

**설정 변경 및 저장**:
- 각 항목 수정 시 즉시 변경 감지
- 변경사항 있음 → 경고 메시지 표시
- 초기화 기능 제공: 원래 설정값으로 되돌리기
- 저장 기능 제공:
  - 실행 → 설정 저장 API 호출
  - 저장 중: 로딩 상태 표시, 저장 기능 비활성화
  - 성공 시:
    - 성공 메시지 표시
    - 변경 이력 자동 기록 (누가, 언제, 무엇을 변경했는지)
    - 변경사항 경고 메시지 제거
    - **저장된 기준이 즉시 사용자 앱의 위험 신호 감지(사용자 명세서 9.1)에 반영됨**
  - 실패 시: 에러 메시지 표시

**검증**:
- 모니터링 기간: 1~365 사이 값만 허용
- 연속 부정 감정 임계 점수: 1~100 사이 값만 허용
- 부정 감정 임계 점수: 1~200 사이 값만 허용
- High의 연속 점수는 Medium의 연속 점수보다 커야 함
- Medium의 연속 점수는 Low의 연속 점수보다 커야 함
- High의 부정 감정 점수는 Medium의 부정 감정 점수보다 커야 함
- Medium의 부정 감정 점수는 Low의 부정 감정 점수보다 커야 함
- 검증 실패 시: 경고 메시지 표시

---

### 4.3 상담 기관 리소스 관리
**화면**: 시스템 설정 페이지 - 상담 기관 리소스 관리 탭

**상담 기관 목록**:
- 각 기관 정보 카드 형태로 표시
- 각 카드 표시 내용:
  - 기관명
  - 카테고리 배지 (긴급 상담/전문 상담/상담 전화/의료 기관)
  - 긴급 여부 배지 (긴급 상담인 경우 긴급 배지 표시)
  - 설명
  - 전화번호
  - 웹사이트 (새 창 열기 기능 제공)
  - 운영 시간
  - 수정/삭제 기능 제공

**기본 상담 기관** (초기 로드 시):
- 자살예방 상담전화 (1393) - 긴급 상담, 24시간
- 정신건강 위기상담 전화 (1577-0199) - 긴급 상담, 24시간
- 청소년 상담전화 (1388) - 상담 전화, 평일 09:00-22:00
- 한국심리상담협회 (02-3452-0091) - 전문 상담, 평일 09:00-18:00

**참고**: 관리자가 관리하는 상담 기관은 사용자 명세서 9.3 지원 리소스 페이지에서 표시됩니다. 사용자 화면의 카테고리 필터는 다음과 같이 매핑됩니다:
- 전체: 모든 카테고리
- 긴급 상담: 긴급 상담 카테고리
- 전문 상담: 전문 상담 카테고리
- 상담 전화: 상담 전화 카테고리
- 의료 기관: 의료 기관 카테고리

**상담 기관 추가**:
- 새 기관 추가 기능 실행
- 상담 기관 추가/수정 표시

**상담 기관 수정**:
- 목록에서 수정 기능 실행
- 상담 기관 추가/수정 표시에 기존 정보 로드

**상담 기관 삭제**:
- 목록에서 삭제 기능 실행
- 삭제 확인 기능 표시
- 확인 실행 → 삭제 API 호출 → 성공 메시지 및 목록에서 제거

**상담 기관 추가/수정 표시**:
- 입력 항목:
  - **기관명** (필수)
  - **카테고리** (필수):
    - 긴급 상담
    - 전문 상담
    - 상담 전화
    - 의료 기관
  - **전화번호** (필수)
  - **웹사이트 주소** (선택)
    - URL 형식 검증 (http:// 또는 https://로 시작)
  - **설명** (필수)
  - **운영 시간** (선택)
  - **긴급 상담 기관으로 표시**:
    - 선택 시: 카테고리와 별개로 긴급 배지 표시
    - 사용자 화면에서 High 레벨 위험 신호 표시(사용자 명세서 9.2)에 이 기관의 전화번호가 자동으로 표시됨

**참고**: 사용자 명세서 9.2에서 "High 레벨인 경우: 긴급 상담 전화번호 표시 (1393, 1577-0199)"는 관리자가 "긴급 상담 기관으로 표시"로 설정한 기관의 전화번호가 동적으로 표시됩니다.

**저장 및 완료**:
- 저장 기능 실행
- 검증 통과 → 상담 기관 저장 API 호출
- 저장 성공 시:
  - 성공 메시지 표시
  - 목록 자동 갱신
  - 추가/수정 표시 닫기

**닫기**:
- 닫기 기능 제공 → 추가/수정 표시 닫기

---

## 5. 에러 로그 조회 플로우

### 5.1 에러 로그 목록 조회
**화면 전환**:
- 네비게이션에서 에러 로그 기능 실행
- 에러 로그 조회 페이지로 이동

**초기 로드**:
- 시스템: 에러 로그 목록 자동 로드
- 로딩 상태 표시

**통계 카드**:
- **전체 로그 수**: 총 로그 개수
- **ERROR 레벨**: 에러 레벨 로그 개수 (시각적으로 구분)
- **WARN 레벨**: 경고 레벨 로그 개수 (시각적으로 구분)
- **INFO 레벨**: 정보 레벨 로그 개수 (시각적으로 구분)

**로그 목록 테이블**:
- 각 행: 에러 로그 정보
- 열 구성:
  - **로그 ID**: 고유 식별자
  - **타임스탬프**: 발생 시간 (YYYY-MM-DD HH:mm:ss)
  - **레벨**: ERROR/WARN/INFO 배지 (시각적으로 구분)
  - **메시지**: 에러 메시지 요약 (최대 100자, 초과 시 "..." 표시)
  - **엔드포인트**: API 엔드포인트 또는 페이지
  - **액션**: 상세보기 기능 제공

**정렬**:
- 기본 정렬: 타임스탬프 최신순

**데이터 갱신**:
- 페이지 진입 시 자동 로드
- 필터 변경 시 자동 갱신

---

### 5.2 에러 로그 필터링 및 검색
**필터 기능**:
- **심각도 필터** 기능 제공:
  - 전체 (ALL)
  - ERROR만
  - WARN만
  - INFO만
- **날짜 필터** 기능 제공:
  - 시작일 선택
  - 종료일 선택
  - 빠른 선택 기능 제공: 오늘, 이번 주, 이번 달
- 필터 변경 시 자동으로 목록 갱신

**검색 기능**:
- 검색창: 메시지, 엔드포인트, 에러 코드로 검색
- 검색 실행 기능 제공 또는 Enter 키 입력
- 검색 결과 즉시 테이블에 반영

**필터 초기화**:
- 필터 초기화 기능 제공 → 모든 필터 및 검색어 초기화

---

### 5.3 에러 로그 상세 조회
**화면 전환**:
- 에러 로그 목록에서 상세보기 기능 실행
- 에러 로그 상세 표시

**표시 내용**:

1. **기본 정보**:
   - **로그 ID**: 고유 식별자
   - **타임스탬프**: 발생 시간 (YYYY-MM-DD HH:mm:ss)
   - **레벨**: ERROR/WARN/INFO 배지 (시각적으로 구분)

2. **에러 정보**:
   - **메시지**: 전체 에러 메시지
   - **오류 코드** (있는 경우): 코드 형식으로 표시
   - **엔드포인트** (있는 경우): API 엔드포인트 또는 페이지
   - **사용자 ID** (있는 경우): 에러 발생 당시 사용자 ID

3. **Stack Trace** (있는 경우):
   - 코드 형식으로 표시
   - 줄바꿈 및 들여쓰기 유지

**닫기**:
- 닫기 기능 제공 → 상세 표시 닫기

---

## 6. 로그아웃 플로우

### 6.1 관리자 로그아웃
**화면 전환**:
- 네비게이션에서 로그아웃 기능 실행

**프로세스**:
1. 로그아웃 확인 기능 표시:
   - 로그아웃 확인 메시지 표시
   - 로그아웃 확인 실행:
     - 관리자 JWT 토큰 삭제 (localStorage에서 admin_jwt_token 제거)
     - 관리자 정보 삭제
     - 관리자 로그인 페이지로 이동
   - 취소 선택 → 확인 기능 닫기

---

## 7. 공통 기능 및 상호작용

### 7.1 네비게이션
**화면**: 모든 관리자 화면에 네비게이션 표시

**네비게이션 기능**:
1. **서비스 통계** (기본)
   - 실행 → 서비스 통계 화면으로 이동
2. **공지사항 관리**
   - 실행 → 공지사항 관리 화면으로 이동
3. **시스템 설정**
   - 실행 → 시스템 설정 화면으로 이동
4. **에러 로그**
   - 실행 → 에러 로그 조회 화면으로 이동
5. **로그아웃**
   - 실행 → 로그아웃 확인 기능 표시 → 로그아웃 처리

**현재 탭 표시**:
- 활성화된 탭은 시각적으로 강조 표시 기능 제공

---

### 7.2 데이터 동기화 및 자동 업데이트
**트리거 상황**:
- 공지사항 작성/수정/삭제 후 → 공지사항 목록 자동 갱신
- 상담 기관 추가/수정/삭제 후 → 상담 기관 목록 자동 갱신
- 시스템 설정 변경 후 → 변경사항 즉시 반영
- 페이지 재진입 시 → 최신 데이터 자동 로드

**처리 과정**:
- 관련 데이터 자동 재조회
- 화면 자동 업데이트
- 로딩 상태 표시

---

### 7.3 에러 처리 및 로딩 상태
**에러 처리**:
- API 호출 실패 시: 에러 메시지 표시
- 인증 에러 (401): 관리자 로그인 페이지로 리다이렉트
- 권한 에러 (403): 접근 권한 없음 메시지 표시
- 기타 에러: 각 화면에서 적절한 에러 메시지 표시

**로딩 상태**:
- API 호출 중: 로딩 상태 표시
- 실행 중인 기능에 대한 로딩 상태 표시 및 비활성화
- 화면 전체: 로딩 상태 표시

---

## 8. 데이터 저장 및 관리

### 8.1 관리자 세션 관리
- 관리자 JWT 토큰 저장 (localStorage: admin_jwt_token)
- 관리자 정보 저장 (이름, 이메일 등)
- 토큰 만료 시 자동 로그아웃 처리

### 8.2 데이터 저장소
**참고**: 이 명세서는 기능 명세이므로 실제 구현 시 데이터베이스(MariaDB 등)에 저장됩니다. 프로토타입에서 사용된 localStorage는 실제 구현 시 서버 데이터베이스로 대체됩니다.

**저장되는 데이터**:
- 관리자 계정 정보
- 사용자 정보 및 일지 데이터
- 위험 신호 감지 기준 설정
- 상담 기관 리소스 정보
- 공지사항 데이터
- 에러 로그

---
